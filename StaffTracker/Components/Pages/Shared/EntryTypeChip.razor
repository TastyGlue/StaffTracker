@using StaffTracker.Enums
@using StaffTracker.Services
@inject ILocalizationService Localizer
@implements IDisposable

<MudChip T="string" Variant="Variant.Outlined" Color="Color.Primary" Style="@Style">
    @Text
</MudChip>

@code {
    [Parameter] public EntryType EntryType { get; set; }

    private string Text => EntryType switch
    {
        EntryType.Dismissal => Localizer["Dismissal"],
        EntryType.Appointment => Localizer["Appointment"],
        _ => "Unknown"
    };

    private string Style => EntryType switch
    {
        EntryType.Dismissal => "border-color: #e64c4c; color: #e64c4c;",
        EntryType.Appointment => "border-color: #4dbd28; color: #4dbd28;",
        _ => string.Empty
    };

    protected override void OnInitialized()
    {
        base.OnInitialized();

        Localizer.OnCultureChanged += StateHasChanged;
    }

    public void Dispose()
    {
        Localizer.OnCultureChanged -= StateHasChanged;
    }
}
